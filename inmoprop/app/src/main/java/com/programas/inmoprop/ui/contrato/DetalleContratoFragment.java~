package com.programas.inmoprop.ui.contrato;

import androidx.lifecycle.ViewModelProvider;

import android.app.Application;
import android.os.Bundle;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;

import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

import com.programas.inmoprop.R;
import com.programas.inmoprop.databinding.FragmentContratoBinding;
import com.programas.inmoprop.databinding.FragmentDetalleContratoBinding;
import com.programas.inmoprop.modelos.Contrato;

public class DetalleContratoFragment extends Fragment {


    private DetalleContratoViewModel vm;
    private FragmentDetalleContratoBinding binding;



    @Override
    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container,
                             @Nullable Bundle savedInstanceState) {

    vm=new ViewModelProvider(this).get(DetalleContratoViewModel.class);
    binding=FragmentDetalleContratoBinding.inflate(inflater,container,false);
    View root=binding.getRoot();
    Bundle bundle=getArguments();
        Log.d("bundle_contrato",bundle.toString());
    vm.getmContrato().observe(getActivity(), new androidx.lifecycle.Observer<Contrato>() {
        @Override
        public void onChanged(Contrato contrato) {
            binding.tvTituloContrato.setText(binding.tvTituloContrato.getText()+" " +contrato.getIdcontrato());
            binding.etFechas.setText(("Fecha Desde: "+contrato.getFdesde()
                    +"Hasta: "+contrato.getFhasta())
            );
            binding.etImporte.setText("$: "+contrato.getImporte()
            );
            binding.etDatosInmueble.setText("Codigo: "+contrato.getDatosinmueble().getIdinmueble()
            +"Dir: "+contrato.getDatosinmueble().getDireccion()
            );
            binding.etUbicacion.setText("Ubicaci√≥n Lat: "+contrato.getDatosinmueble().getLatitud()
                    + "Long: "+contrato.getDatosinmueble().getLongitud()
            );
            binding.etDatosInmuebleCaracteristica.setText("Amb:"+contrato.getDatosinmueble().getAmbientes()
                    +"Sup: "+contrato.getDatosinmueble().getSuperficie()
                    +"Amb.: "+contrato.getDatosinmueble().getAmbientes()
            );
        binding.etApeyNombreInq.setText("Apellido y Nombre: "+contrato.getDatosinquilino().getApellido()
                +", "+contrato.getDatosinquilino().getNombre()
                );
        binding.etDni.setText("DNI:" + contrato.getDatosinquilino().getDni());
        binding.etMail.setText("MAIL: "+contrato.getDatosinquilino().getMail());
}
    });
    vm.obtenerContrato(bundle);
    return root;
    }



    @Override
    public void onDestroyView() {
        super.onDestroyView();
        binding=null;
    }
}



